# model_evaluation
信用模型评估方法

1、单个模型自身的评估 SingleModelEvaluation.py

从业务角度出发，计算各个分层内的金额/笔数逾期率和人数占比

1.1 首先用sql在数据库中取出建模样本（建模样本指的是每一个订单）的每一个账期所对应的模型分、实际放款金额、总期数、还款日期、逾期天数、该账期所对应的期数编号，作为统计数据

1.2 用上面的统计数据，计算模型的AUC以及KS，并且根据模型分对样本进行分层，计算每一个分层内的金额和笔数逾期率、人数占比；

这部分评估，可以应用在2个地方：

1.2.1 当评估新模型效果的时候：1.2的统计结果能让我们看到分层是否合理，不合理的话人工进行调整；分层合理之后，就可以根据分层来进行定额，估算逾期率、通过率、回款率，利润以及通过率。

1.2.2 当评估老模型效果的时候：1.2的统计结果，能让我们看出额度定的是否合理（当金额逾期率<=笔数逾期率的时候，说明合理）、每一层的逾期率是否还是跟建模时候预期的一样、整体通过率是否和建模时候预期的一样等等。

2、比较新老模型的差异 CompareTwoModel.py

新模型上线之后，需要明确它与老模型之间的差异，从以下几个方面进行评估：

2.1 偏移矩阵

对于同一批样本，分别得到新老模型的分数，然后构造偏移矩阵，如下：

            新模型分层A  　　　　　　　　　　　　　　　　　　　　    　　　　新模型分层B  新模型分层C  新模型分层D 新模型分层E  
            
老模型分层A  属于老模型Ａ层的用户，同时也属于新模型Ａ层的人数占比＝90%　   　　8%           　2%　           0%  　     0%

老模型分层B  以此类推

老模型分层C

老模型分层D

其中， 属于老模型Ａ层，同时也属于新模型Ａ层的样本个数占比　＝　属于老模型Ａ层，同时也属于新模型Ａ层的样本个数　／　老模型Ａ层的样本总个数。

能看出：使用新模型之后，每一层人数的偏移变化，例如上例，原本属于老模型Ａ层的用户，有９０％还是属于新模型的A层，但是有8%移到了新模型的B层，2%移到了新模型的C层。这说明，新模型相对于老模型的打分，让用户往偏下层偏了。

2.2 画新老模型分数差值图

横坐标：新模型分 - 老模型分，纵坐标：人数占比

可以看出：大部分样本的分值差异，是偏高了还是偏低了。
